# Development Instructions

# Setup

Clone the repo and run `pip install -e ".[dev]"`.

# Publication

To publish to pypi:

```shell
export PYPI_TOKEN=...
bash scripts/publish.sh
```

# Schema Maintenance

The results leaderboard is a HuggingFace dataset with a fixed schema, defined in its README file.
The README file is generated by the `scripts/update_readme.py` script, 
which reads the schema from the `src/agenteval/leaderboard/dataset_features.yml` file. That file is
in turn generated from the Pydantic model by the `scripts/update_schema.py` script.

If you make changes to the Pydantic model, you should run the following commands to update the schema and README:

```shell
python scripts/update_schema.py
python scripts/update_readme.py sync-schema
```

When a new config version is defined (e.g. v1.1.0), you need to update the HF schema by running
```shell
python scripts/update_readme.py add-config --config-name <config_name> --split <split1> --split <split2> ...
```
The script will enforce that all config versions use the same data model for leaderboard submissions.